# ๐ต ูุงุจูุช ุฏุงูููุฏ ุงุฒ ุฑุงุฏู ุฌูุงู

## ุชุงุฑุฎ: 2025-11-01
## ูุถุนุช: โ ูพุงุฏูโุณุงุฒ ุดุฏ

---

## ุฎูุงุตู
ฺฉ ุณุณุชู ฺฉุงูู ู ูุณุชูู ุจุฑุง ุฏุงูููุฏ ุขููฺฏ ุงุฒ ุฑุงุฏู ุฌูุงู ุจู ุฑุจุงุช ุงุถุงูู ุดุฏ.

## ูฺฺฏโูุง

### โ ูุณุชูู ุงุฒ ุณุงุฑ ุจุฎุดโูุง
- ูฺ ุงุฑุชุจุงุท ุจุง `universal_downloader` ูุฏุงุฑุฏ
- ูฺ ุงุฑุชุจุงุท ุจุง `youtube_handler` ูุฏุงุฑุฏ
- ุณุณุชู ฺฉุงููุงู ุฌุฏุงฺฏุงูู ุจุง handler ูุฎุตูุต ุฎูุฏุด

### โ ูุงุจูุชโูุง
- ุฏุงูููุฏ ุขููฺฏ ุจุง ฺฉูุช ุจุงูุง (HQ)
- ููุงุด ุงุทูุงุนุงุช ฺฉุงูู ุขููฺฏ
- ุขูพููุฏ ุจู ุชูฺฏุฑุงู ุจุง ูุชุงุฏุชุง (ุนููุงูุ ููุฑููุฏุ ูุฏุช ุฒูุงู)
- ฺฉูพุดู ุฒุจุง ุจุง ุขูุงุฑ ุขููฺฏ

### โ ูพุดุชุจุงู ุงุฒ ููฺฉโูุง
```
https://play.radiojavan.com/song/sijal-baz-mirim-baham-(ft-sami-low)
https://radiojavan.com/song/...
https://www.radiojavan.com/song/...
```

## ูุงูโูุง ุงุฌุงุฏ ุดุฏู

### 1. `plugins/radiojavan_handler.py`
Handler ุงุตู ฺฉู:
- ููฺฉโูุง ุฑุงุฏู ุฌูุงู ุฑุง ุชุดุฎุต ูโุฏูุฏ
- ุงุทูุงุนุงุช ุขููฺฏ ุฑุง ุงุฒ API ุฏุฑุงูุช ูโฺฉูุฏ
- ูุงู ุฑุง ุฏุงูููุฏ ู ุขูพููุฏ ูโฺฉูุฏ
- ุขูุงุฑ ฺฉุงุฑุจุฑ ุฑุง ุจุฑูุฒุฑุณุงู ูโฺฉูุฏ

### 2. ุชุบุฑุงุช ุฏุฑ `bot.py`
```python
import plugins.radiojavan_handler  # ๐ต RadioJavan downloader
```

### 3. ุชุบุฑุงุช ุฏุฑ `requirements.txt`
```
radiojavanapi  # ๐ต RadioJavan downloader
```

## ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ฺฉุงุฑุจุฑุงู:
1. ููฺฉ ุขููฺฏ ุงุฒ ุฑุงุฏู ุฌูุงู ุฑุง ฺฉูพ ฺฉูุฏ
2. ููฺฉ ุฑุง ุฏุฑ ุฑุจุงุช ุงุฑุณุงู ฺฉูุฏ
3. ุฑุจุงุช ุงุทูุงุนุงุช ุขููฺฏ ุฑุง ููุงุด ูโุฏูุฏ
4. ูุงู ุตูุช ุจุง ฺฉูุช ุจุงูุง ุงุฑุณุงู ูโุดูุฏ

### ูุซุงู:
```
ฺฉุงุฑุจุฑ: https://play.radiojavan.com/song/sijal-baz-mirim-baham-(ft-sami-low)

ุฑุจุงุช: ๐ต ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด...
      โณ ูุทูุงู ุตุจุฑ ฺฉูุฏ...

ุฑุจุงุช: ๐ต Sijal - Baz Mirim Baham (Ft Sami Low)
      โฌ๏ธ ุฏุฑ ุญุงู ุฏุงูููุฏ...

ุฑุจุงุช: ๐ต Sijal - Baz Mirim Baham (Ft Sami Low)
      โฌ๏ธ ุฏุฑ ุญุงู ุขูพููุฏ...

ุฑุจุงุช: [ูุงู ุตูุช]
      ๐ง Sijal - "Baz Mirim Baham (Ft Sami Low)"
      ๐ฏ Plays: 13,679,804
      ๐ฅ Downloads: 13,679,804
      ๐ Likes: 1,234
      
      ๐ต ุงุฒ ุฑุงุฏู ุฌูุงู ุฏุงูููุฏ ุดุฏ
```

## ุฌุฒุฆุงุช ูู

### Pattern Recognition
```python
RADIOJAVAN_REGEX = re.compile(
    r'^(?:https?://)?(?:www\.)?(?:play\.)?radiojavan\.com/(?:song|podcast|video)/[\w\-]+/?$',
    re.IGNORECASE
)
```

### API Integration
ุงุฒ ฺฉุชุงุจุฎุงูู `radiojavanapi` ุงุณุชูุงุฏู ูโุดูุฏ:
```python
from radiojavanapi import Client as RJClient

client = RJClient()
song = client.get_song_by_url(url)
```

### ุงุทูุงุนุงุช ุงุณุชุฎุฑุงุฌ ุดุฏู
- ูุงู ุขููฺฏ
- ููุฑููุฏ
- ุขูุจูู
- ุชุงุฑุฎ ุงูุชุดุงุฑ
- ูุฏุช ุฒูุงู
- ุชุนุฏุงุฏ ูุงฺฉ
- ุชุนุฏุงุฏ ุฏุงูููุฏ
- ููฺฉ ุฏุงูููุฏ (HQ, Normal, LQ)
- ุชุตูุฑ ฺฉุงูุฑ

### Download Flow
1. ุฏุฑุงูุช ุงุทูุงุนุงุช ุงุฒ API
2. ุงูุชุฎุงุจ ููฺฉ HQ (ุง Normal ุจู ุนููุงู fallback)
3. ุฏุงูููุฏ ูุงู ุจู ุตูุฑุช async
4. ุขูพููุฏ ุจู ุชูฺฏุฑุงู ุจุง ูุชุงุฏุชุง
5. ุญุฐู ูุงู ูุญู
6. ุจุฑูุฒุฑุณุงู ุขูุงุฑ ฺฉุงุฑุจุฑ

## ุงููุช ู ุจูููโุณุงุฒ

### โ ููุชุฑ ุนุถูุช ุงุณูพุงูุณุฑ
```python
@Client.on_message(filters.private & filters.text & join, group=5)
```
ฺฉุงุฑุจุฑุงู ุจุงุฏ ุฏุฑ ฺฉุงูุงู ุงุณูพุงูุณุฑ ุนุถู ุจุงุดูุฏ.

### โ ูุฏุฑุช ุฎุทุง
- ุชูุงู ุฎุทุงูุง ูุงฺฏ ูโุดููุฏ
- ูพุงูโูุง ุฎุทุง ฺฉุงุฑุจุฑูพุณูุฏ
- Graceful degradation

### โ ูพุงฺฉุณุงุฒ ุฎูุฏฺฉุงุฑ
ูุงูโูุง ุฏุงูููุฏ ุดุฏู ุจุนุฏ ุงุฒ ุขูพููุฏ ุญุฐู ูโุดููุฏ.

### โ Async Operations
ุชูุงู ุนููุงุช I/O ุจู ุตูุฑุช async ุงูุฌุงู ูโุดููุฏ:
- ุฏุฑุงูุช ุงุทูุงุนุงุช ุงุฒ API
- ุฏุงูููุฏ ูุงู
- ุฐุฎุฑู ูุงู

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1. ูุตุจ ฺฉุชุงุจุฎุงูู
```bash
pip install radiojavanapi
```

ุง:
```bash
pip install -r requirements.txt
```

### 2. ุฑุงูโุงูุฏุงุฒ ุฑุจุงุช
```bash
python bot.py
```

### 3. ุชุณุช
ููฺฉ ุฒุฑ ุฑุง ุฏุฑ ุฑุจุงุช ุงุฑุณุงู ฺฉูุฏ:
```
https://play.radiojavan.com/song/sijal-baz-mirim-baham-(ft-sami-low)
```

## ูุงฺฏโูุง

ูุงฺฏโูุง ูุฑุจูุท ุจู ุฑุงุฏู ุฌูุงู ุฏุฑ ูุงู ุฒุฑ ุฐุฎุฑู ูโุดููุฏ:
```
logs/radiojavan_handler.log
```

### ูุซุงู ูุงฺฏ:
```
2025-11-01 14:30:15 - radiojavan_handler - INFO - RadioJavan request from user 123456: https://play.radiojavan.com/song/...
2025-11-01 14:30:16 - radiojavan_handler - INFO - Fetching song info from: https://play.radiojavan.com/song/...
2025-11-01 14:30:17 - radiojavan_handler - INFO - Song info fetched: Sijal - Baz Mirim Baham (Ft Sami Low)
2025-11-01 14:30:18 - radiojavan_handler - INFO - Downloading: Sijal - Baz Mirim Baham (Ft Sami Low).mp3
2025-11-01 14:30:25 - radiojavan_handler - INFO - Download completed: downloads/Sijal - Baz Mirim Baham (Ft Sami Low).mp3
2025-11-01 14:30:35 - radiojavan_handler - INFO - Deleted local file: downloads/Sijal - Baz Mirim Baham (Ft Sami Low).mp3
2025-11-01 14:30:35 - radiojavan_handler - INFO - Stats updated for user 123456
2025-11-01 14:30:35 - radiojavan_handler - INFO - RadioJavan download completed for user 123456
```

## ูุญุฏูุฏุชโูุง

### โ๏ธ ูฺฉุงุช ููู:
1. ููุท ุขููฺฏโูุง ุนููู ูุงุจู ุฏุงูููุฏ ูุณุชูุฏ
2. ุจุฑุฎ ุขููฺฏโูุง ููฺฉู ุงุณุช ูุญุฏูุฏุช ุฌุบุฑุงูุง ุฏุงุดุชู ุจุงุดูุฏ
3. ฺฉูุช HQ ุชุฑุฌุญ ุฏุงุฏู ูโุดูุฏ (fallback ุจู Normal)

## ุขูุฏู

### ูุงุจูุชโูุง ูพุดููุงุฏ:
- [ ] ูพุดุชุจุงู ุงุฒ ูพุงุฏฺฉุณุชโูุง
- [ ] ูพุดุชุจุงู ุงุฒ ูุฏููุง
- [ ] ุงูุชุฎุงุจ ฺฉูุช ุชูุณุท ฺฉุงุฑุจุฑ
- [ ] ููุงุด ูุชู ุขููฺฏ (lyrics)
- [ ] ุฏุงูููุฏ ุขูุจูู ฺฉุงูู

## ุฎูุงุตู

โ ุณุณุชู ฺฉุงูู ู ูุณุชูู ุจุฑุง ุฏุงูููุฏ ุงุฒ ุฑุงุฏู ุฌูุงู
โ ูฺ ุชุฏุงุฎู ุจุง ุณุงุฑ ุจุฎุดโูุง
โ ฺฉูพุดู ุฒุจุง ุจุง ุขูุงุฑ ฺฉุงูู
โ ูุฏุฑุช ุฎุทุง ูู
โ ูุงฺฏโฺฏุฐุงุฑ ุฏูู
โ ุจูููโุณุงุฒ ุดุฏู ู async

## ุชุณุช ููุง

ุจุฑุง ุชุณุช ฺฉุงูู:
1. ุฑุจุงุช ุฑุง ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ
2. ููฺฉ ุฑุงุฏู ุฌูุงู ุงุฑุณุงู ฺฉูุฏ
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุงู ุจุง ฺฉูพุดู ุตุญุญ ุงุฑุณุงู ุดูุฏ
4. ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ
