# โ ุฑูุน ูุดฺฉูุงุช ููุง ุณุณุชู ุงุณูพุงูุณุฑ

## ๐ง ูุดฺฉูุงุช ุฑูุน ุดุฏู:

### 1. โ **ูพุงู ุฌูู 2 ุจุงุฑ ุงุฑุณุงู ูโุดุฏ**
**ุนูุช**: `join_check` ุจุฑุง ูุฑ handler ฺูุฏู ุจุงุฑ ูุฑุงุฎูุงู ูโุดุฏ

**ุฑุงูโุญู**: 
- ุงุถุงูู ฺฉุฑุฏู ุณุณุชู cache ุจุง TTL 5 ุซุงูู
- ุจุฑุฑุณ cache ูุจู ุงุฒ ุงุฑุณุงู ูพุงู
- ุฐุฎุฑู ูุชุฌู ุฏุฑ cache ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจุฑุฑุณ ุชฺฉุฑุงุฑ

```python
JOIN_CHECK_CACHE = {}  # {user_id: (result, timestamp)}
JOIN_CACHE_TTL = 5  # 5 seconds
```

### 2. โ **ููฺฏุงู /start ุฏุฑุฎูุงุณุช ุฌูู ูโฺฉุฑุฏ**
**ุนูุช**: ููุชุฑ `join` ุจุฑุง ุชูุงู ูพุงูโูุง ุงุนูุงู ูโุดุฏ

**ุฑุงูโุญู**:
- ุงุณุชูุงุฏู ุงุฒ cache ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจุฑุฑุณ ุชฺฉุฑุงุฑ
- ููุท ฺฉ ุจุงุฑ ูพุงู ุงุฑุณุงู ูโุดูุฏ

### 3. โ **ุฏฺฉูู ููฺฉ ฺฉุงูุงู ููุงุด ุฏุงุฏู ููโุดุฏ**
**ุนูุช**: ุชุงุจุน `sponsor_join_markup` ููุท ุจุฑุง `@username` ุฏฺฉูู ูโุณุงุฎุช

**ุฑุงูโุญู**:
- ูพุดุชุจุงู ุงุฒ ูุฑ ุฏู ููุน: `@username` ู `-100...` (ID ุนุฏุฏ)
- ุงุณุชูุงุฏู ุงุฒ ูุณุช `sponsors` ุจุฑุง ุงูุชู ูุงู ู ููฺฉ ฺฉุงูุงู
- ููุงุด ุฏฺฉูู ููุงุณุจ ุจุฑุง ูุฑ ููุน

```python
if tag.startswith('@'):
    # Public channel
    url = f"https://t.me/{username}"
    buttons.append([InlineKeyboardButton("๐ ุนุถูุช ุฏุฑ ฺูู ูุง", url=url)])
elif tag.startswith('-100'):
    # Private channel - check sponsors list
    # ...
```

### 4. โ **ููโุชูุงู ุงุฒ ูพูู ุงุฏูู ุงุณูพุงูุณุฑ ุชูุธู ฺฉุฑุฏ**
**ุนูุช**: handler ุนููู ูุชู (`handle_text_messages`) ุฏุฑ group 1 ุจูุฏ ู ูุจู ุงุฒ `set_sp` (group 5) ุงุฌุฑุง ูโุดุฏ

**ุฑุงูโุญู**:
- ุชุบุฑ group priority ุงุฒ 1 ุจู 10
- ุญุงูุง `set_sp` (group 5) ูุจู ุงุฒ `handle_text_messages` (group 10) ุงุฌุฑุง ูโุดูุฏ

### 5. โ **ูพุงฺฉ ฺฉุฑุฏู cache ุจุนุฏ ุงุฒ verify**
**ุฑุงูโุญู**:
- ููฺฏุงู ฺฉูฺฉ ุฑู "ุฌูู ุดุฏู"ุ cache ฺฉุงุฑุจุฑ ูพุงฺฉ ูโุดูุฏ
- ุจุฑุฑุณ ุฌุฏุฏ ุนุถูุช ุงูุฌุงู ูโุดูุฏ

## ๐ ุชุบุฑุงุช ูู:

### ูุงู `plugins/start.py`:
1. ุงุถุงูู ฺฉุฑุฏู `JOIN_CHECK_CACHE` ู `JOIN_CACHE_TTL`
2. ุจูุจูุฏ `join_check` ุจุง ุณุณุชู cache
3. ุจูุจูุฏ `sponsor_join_markup` ุจุฑุง ูพุดุชุจุงู ุงุฒ ID ุนุฏุฏ
4. ุชุบุฑ group priority ุงุฒ 1 ุจู 10
5. ุงุถุงูู ฺฉุฑุฏู callback `sponsor_info`
6. ูพุงฺฉ ฺฉุฑุฏู cache ุฏุฑ `verify_join_callback`

### ูุชุฌู:
- โ ูพุงู ููุท ฺฉ ุจุงุฑ ุงุฑุณุงู ูโุดูุฏ
- โ ุฏฺฉูู ููฺฉ ฺฉุงูุงู ููุงุด ุฏุงุฏู ูโุดูุฏ
- โ ูโุชูุงู ุงุฒ ูพูู ุงุฏูู ุงุณูพุงูุณุฑ ุชูุธู ฺฉุฑุฏ
- โ ุนููฺฉุฑุฏ ุณุฑุนโุชุฑ ุจุง cache
- โ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ

## ๐งช ุชุณุชโูุง ูพุดููุงุฏ:

1. **ุชุณุช ูพุงู ุชฺฉุฑุงุฑ**: ููฺฉ ุจูุฑุณุชุฏ ู ุจุจูุฏ ููุท ฺฉ ูพุงู ูโุขุฏ
2. **ุชุณุช ุฏฺฉูู ููฺฉ**: ุฑู ุฏฺฉูู ฺฉูฺฉ ฺฉูุฏ ู ุจุจูุฏ ุจู ฺฉุงูุงู ูโุฑูุฏ
3. **ุชุณุช ุชูุธู ุงุณูพุงูุณุฑ**: ุงุฒ ูพูู ุงุฏูู ุงุณูพุงูุณุฑ ุฌุฏุฏ ุชูุธู ฺฉูุฏ
4. **ุชุณุช verify**: ุนุถู ุดูุฏ ู ุฑู "ุฌูู ุดุฏู" ุจุฒูุฏ

---

**โ ุชูุงู ูุดฺฉูุงุช ุจุง ููููุช ุฑูุน ุดุฏูุฏ!**