# Requirements Document - Phase 2: Admin Panel Improvements

## Introduction

این فاز شامل بهبودهای پنل ادمین و سیستم مانیتورینگ خودکار کوکی یوتیوب است. هدف اصلی بهبود UX پنل ادمین و اطمینان از سلامت کوکی‌های یوتیوب است.

## Glossary

- **Admin Panel**: پنل مدیریت ربات که فقط برای ادمین‌ها قابل دسترسی است
- **Cookie**: فایل کوکی یوتیوب که برای دانلود استفاده می‌شود
- **Cookie Validator**: سیستم خودکار بررسی سلامت کوکی
- **Proxy Check**: بخش بررسی پروکسی که باید حذف شود
- **Task Stats**: آمار وظایف که باید حذف شود

## Requirements

### Requirement 1: حذف بخش بررسی پروکسی

**User Story:** به عنوان ادمین، می‌خواهم بخش بررسی پروکسی از پنل حذف شود تا پنل ساده‌تر و تمیزتر باشد.

#### Acceptance Criteria

1. WHEN ادمین پنل ادمین را باز می‌کند، THE System SHALL دکمه "🔌 بررسی پروکسی" را نمایش ندهد
2. WHEN ادمین روی دکمه‌های پنل کلیک می‌کند، THE System SHALL هیچ callback مربوط به پروکسی را پردازش نکند
3. THE System SHALL تمام کدهای مربوط به proxy check را از فایل‌های مربوطه حذف کند
4. THE System SHALL تمام handler های مربوط به proxy را unregister کند

### Requirement 2: بازآرایی دکمه‌های پنل ادمین

**User Story:** به عنوان ادمین، می‌خواهم دکمه‌های پنل به صورت 2 ستونی (2 دکمه در هر سطر) نمایش داده شوند تا دسترسی راحت‌تر باشد.

#### Acceptance Criteria

1. WHEN ادمین پنل ادمین را باز می‌کند، THE System SHALL 10 دکمه باقی‌مانده را نمایش دهد
2. THE System SHALL دکمه‌ها را در 5 سطر با 2 دکمه در هر سطر نمایش دهد
3. THE System SHALL ترتیب دکمه‌ها را به صورت منطقی حفظ کند
4. THE System SHALL فاصله مناسب بین دکمه‌ها را رعایت کند
5. THE System SHALL در صورت اضافه شدن دکمه جدید، layout را به صورت خودکار تنظیم کند

**Format مورد انتظار:**
```
[دکمه 1] [دکمه 2]
[دکمه 3] [دکمه 4]
[دکمه 5] [دکمه 6]
[دکمه 7] [دکمه 8]
[دکمه 9] [دکمه 10]
```

### Requirement 3: حذف آمار وظایف از بخش آمار کاربران

**User Story:** به عنوان ادمین، می‌خواهم بخش آمار وظایف (Task Stats) از صفحه آمار کاربران حذف شود تا اطلاعات مرتبط‌تر نمایش داده شود.

#### Acceptance Criteria

1. WHEN ادمین بخش "📊 آمار کاربران" را باز می‌کند، THE System SHALL بخش زیر را نمایش ندهد:
   ```
   🗂 مجموع وظایف: 268
   ⏳ در انتظار: 0
   🟡 آماده: 19
   ✅ تکمیل‌شده: 216
   ```
2. THE System SHALL فقط آمار مربوط به کاربران را نمایش دهد
3. THE System SHALL کدهای مربوط به task statistics را از handler آمار کاربران حذف کند
4. THE System SHALL عملکرد سایر بخش‌های آمار را حفظ کند

### Requirement 4: سیستم خودکار بررسی سلامت کوکی یوتیوب

**User Story:** به عنوان ادمین، می‌خواهم هر 3 ساعت یک بار سلامت کوکی یوتیوب به صورت خودکار بررسی شود و نتیجه به من اطلاع داده شود.

#### Acceptance Criteria

1. THE System SHALL هر 3 ساعت یک بار به صورت خودکار کوکی یوتیوب را بررسی کند
2. WHEN زمان بررسی فرا می‌رسد، THE System SHALL یک تست دانلود یوتیوب با کوکی انجام دهد
3. THE System SHALL از یک ویدیو تست ثابت برای بررسی استفاده کند
4. WHEN تست موفق باشد، THE System SHALL پیام "🌟 گزارش کوکی : ✅ معتبر است" را به ادمین ارسال کند
5. WHEN تست ناموفق باشد، THE System SHALL پیام "🌟 گزارش کوکی : ❌ نامعتبر است" را به ادمین ارسال کند
6. THE System SHALL در صورت نامعتبر بودن کوکی، جزئیات خطا را در لاگ ثبت کند
7. THE System SHALL اولین بررسی را 3 ساعت بعد از راه‌اندازی ربات انجام دهد
8. THE System SHALL در صورت restart شدن ربات، timer را از نو شروع کند
9. THE System SHALL پیام‌های بررسی را فقط به ادمین‌های تعریف شده ارسال کند
10. THE System SHALL در صورت عدم وجود فایل کوکی، پیام مناسب به ادمین ارسال کند

### Requirement 5: مدیریت خطاها و لاگ‌گذاری

**User Story:** به عنوان ادمین، می‌خواهم تمام فعالیت‌های سیستم بررسی کوکی در لاگ ثبت شود تا در صورت مشکل بتوانم عیب‌یابی کنم.

#### Acceptance Criteria

1. THE System SHALL تمام بررسی‌های کوکی را با timestamp در لاگ ثبت کند
2. THE System SHALL نتیجه هر بررسی (موفق/ناموفق) را در لاگ ثبت کند
3. THE System SHALL در صورت خطا، stack trace کامل را در لاگ ثبت کند
4. THE System SHALL زمان شروع و پایان هر بررسی را ثبت کند
5. THE System SHALL در صورت عدم دسترسی به فایل کوکی، خطای مناسب را لاگ کند

### Requirement 6: تنظیمات قابل تغییر

**User Story:** به عنوان توسعه‌دهنده، می‌خواهم بتوانم تنظیمات سیستم بررسی کوکی را به راحتی تغییر دهم.

#### Acceptance Criteria

1. THE System SHALL فاصله زمانی بررسی (3 ساعت) را به صورت constant قابل تغییر نگه دارد
2. THE System SHALL URL ویدیو تست را به صورت constant قابل تغییر نگه دارد
3. THE System SHALL لیست ادمین‌ها را از config فایل بخواند
4. THE System SHALL در صورت تغییر تنظیمات، نیازی به تغییر کد اصلی نباشد

---

## Non-Functional Requirements

### Performance
- بررسی کوکی نباید بیش از 30 ثانیه طول بکشد
- سیستم نباید عملکرد اصلی ربات را تحت تأثیر قرار دهد

### Reliability
- سیستم باید در صورت خطا، خودکار retry کند
- در صورت fail شدن بررسی، سیستم باید به کار خود ادامه دهد

### Maintainability
- کد باید ساده و قابل فهم باشد
- تنظیمات باید به راحتی قابل تغییر باشد

### Security
- فقط ادمین‌های تعریف شده باید پیام دریافت کنند
- فایل کوکی نباید در پیام‌ها نمایش داده شود

---

**تاریخ ایجاد**: 28 اکتبر 2025  
**نسخه**: 1.0  
**وضعیت**: آماده برای طراحی