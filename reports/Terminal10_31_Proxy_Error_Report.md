# گزارش رفع ارور پروکسی (Terminal#10-31)

## خلاصه مشکل
- پیام خطا: `Unable to connect to proxy` با کد ویندوز `WinError 10061` (اتصال رد شد).
- سناریو: درخواست‌های YouTube از طریق پروکسی هدایت می‌شوند و اتصال به `127.0.0.1:10808` برقرار نمی‌شود.

## ریشه‌یابی
- پورت `10808` در v2rayN معمولاً برای SOCKS است، درحالی‌که پیش‌فرض ما از اسکیم `http://` استفاده می‌کرد.
- وقتی به لیسنر SOCKS با اسکیم HTTP وصل شوید، اتصال رد می‌شود و خطای فوق رخ می‌دهد.

## اصلاحات اعمال‌شده در پروژه
- فایل `plugins/proxy_config.py` به‌روزرسانی شد تا پیش‌فرض پروکسی از `http://127.0.0.1:10808` به `http://127.0.0.1:10809` تغییر کند (پورت HTTP در v2rayN).
- توضیحاتی به داک‌استرینگ اضافه شد تا در صورت استفاده از SOCKS، متغیر محیطی به‌صورت `socks5://127.0.0.1:10808` تنظیم شود.

## توصیه‌های اجرایی
- اگر v2rayN فقط SOCKS را فعال کرده است:
  - در PowerShell مقداردهی کنید: ``$env:V2RAY_PROXY = 'socks5://127.0.0.1:10808'``
- اگر HTTP Proxy فعال است:
  - در PowerShell مقداردهی کنید: ``$env:V2RAY_PROXY = 'http://127.0.0.1:10809'``
- تست سریع:
  - PowerShell: ``iwr https://httpbin.org/ip -Proxy 'http://127.0.0.1:10809'`` یا با SOCKS از کتابخانه‌ها استفاده کنید.

## اثر مورد انتظار
- حذف خطای اتصال رد شده هنگام استفاده از `yt-dlp` و مسیرهای دانلود یوتیوب.
- سازگاری بهتر با کتابخانه‌های پایتون (requests/aiohttp/yt-dlp) از طریق اسکیم درست.

## گام‌های بعدی
- در صورت تداوم مشکل:
  - مطمئن شوید v2rayN در حال اجرا و پورت‌های HTTP/SOCKS فعال هستند.
  - متغیرهای محیطی را مطابق اسکیم و پورت فعال تنظیم کنید.
  - لاگ‌های اپلیکیشن و v2rayN را بررسی کنید.

---
Generated: توسط دستیار، براساس لاگ Terminal#10-31