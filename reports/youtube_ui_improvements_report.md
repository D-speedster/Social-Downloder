# ฺฏุฒุงุฑุด ุจูุจูุฏูุง ุฑุงุจุท ฺฉุงุฑุจุฑ ูุชูุจ

## ุฎูุงุตู ูุดฺฉูุงุช ุงููู

### 1. ุชุฃุฎุฑ 10-20 ุซุงููโุง ุฏุฑ ููุงุด ูุถุนุช ุฏุงูููุฏ
- **ูุดฺฉู**: ฺฉุงุฑุจุฑุงู ูพุณ ุงุฒ ุงูุชุฎุงุจ ฺฏุฒูู ุฏุงูููุฏุ 10-20 ุซุงูู ููุชุธุฑ ูโูุงูุฏูุฏ ุชุง ูพุงู ูุถุนุช ุฏุงูููุฏ ููุงุด ุฏุงุฏู ุดูุฏ
- **ุนูุช**: ุนุฏู ููุงุด ูพุงู ููุฑ ุจู ฺฉุงุฑุจุฑ ุฏุฑ ุงุจุชุฏุง ูุฑุขูุฏ ุฏุงูููุฏ
- **ุชุฃุซุฑ**: ฺฉุงุฑุจุฑุงู ูฺฉุฑ ูโฺฉุฑุฏูุฏ ุฑุจุงุช ููฺฏ ฺฉุฑุฏู ู ุงุฒ ูุฑุขูุฏ ุฎุงุฑุฌ ูโุดุฏูุฏ

### 2. ููุงุด ูุงุฏุฑุณุช ุฏุฑุตุฏ ูพุดุฑูุช ุฏุงูููุฏ
- **ูุดฺฉู**: ุฏุฑุตุฏ ูพุดุฑูุช ุจูุงูุงุตูู ุจู 100% ูโุฑุณุฏ ุจู ุฌุง ููุงุด ุชุฏุฑุฌ
- **ุนูุช**: ุนุฏู ุฏุฑ ูุธุฑ ฺฏุฑ fragments ุฏุฑ ูุญุงุณุจู ุฏุฑุตุฏ ูพุดุฑูุช
- **ูุซุงู ูุดฺฉู**: `[download] 100.0% of ~ 1.00KiB at 318.09B/s ETA Unknown (frag 0/38)`

## ุฑุงูโุญูโูุง ูพุงุฏูโุณุงุฒ ุดุฏู

### 1. ุฑูุน ุชุฃุฎุฑ ููุงุด ูุถุนุช

#### ุชุบุฑุงุช ุงุนูุงู ุดุฏู:
- **ุงุถุงูู ฺฉุฑุฏู ูพุงู ููุฑ ุดุฑูุน ุฏุงูููุฏ** (ุฎุท 289-297)
- **ุงุถุงูู ฺฉุฑุฏู ูพุงู ุขูุงุฏูโุณุงุฒ** (ุฎุท 473-481)
- **ุจูุจูุฏ import statements** ุจุฑุง ParseMode

#### ฺฉุฏ ุงุถุงูู ุดุฏู:
```python
# ููุงุด ููุฑ ูพุงู ุดุฑูุน ุฏุงูููุฏ ุจู ฺฉุงุฑุจุฑ
await safe_edit_text(
    f"๐ **ุดุฑูุน ุฏุงูููุฏ**\n\n"
    f"๐ท๏ธ ุนููุงู: {info.get('title', 'ูุงูุดุฎุต')}\n"
    f"๐๏ธ ููุน: {step.get('sort', 'ูุงูุดุฎุต')}\n"
    f"๐พ ุญุฌู: {step.get('filesize', 'ูุงูุดุฎุต')}\n\n"
    f"โณ ุฏุฑ ุญุงู ุขูุงุฏูโุณุงุฒ ุฏุงูููุฏ...",
    parse_mode=ParseMode.MARKDOWN
)
```

### 2. ุฑูุน ูุดฺฉู ููุงุด ุฏุฑุตุฏ ูพุดุฑูุช

#### ุชุบุฑุงุช ุงุนูุงู ุดุฏู:
- **ุจูุจูุฏ ุชุงุจุน progress_hook** (ุฎุท 321-365)
- **ุงุถุงูู ฺฉุฑุฏู ูพุฑุฏุงุฒุด fragments**
- **ฺฉุงูุด ุขุณุชุงูู ุจูโุฑูุฒุฑุณุงู ุงุฒ 5% ุจู 3%**
- **ุจูุจูุฏ ูุญุงุณุจู ุฏุฑุตุฏ ูุงูุน**

#### ฺฉุฏ ุจูุจูุฏ ุงูุชู:
```python
def progress_hook(d):
    if d['status'] == 'downloading':
        # ูุญุงุณุจู ุฏุฑุตุฏ ุจุง ุฏุฑ ูุธุฑ ฺฏุฑ fragments
        if 'fragment_index' in d and 'fragment_count' in d:
            fragment_progress = (d['fragment_index'] / d['fragment_count']) * 100
            current_percent = int(fragment_progress)
        else:
            downloaded = d.get('downloaded_bytes', 0)
            total = d.get('total_bytes') or d.get('total_bytes_estimate', 0)
            if total > 0:
                current_percent = int((downloaded / total) * 100)
            else:
                current_percent = 0
        
        # ุจูโุฑูุฒุฑุณุงู UI ูุฑ 3 ุฏุฑุตุฏ
        if current_percent - progress_tracker['last_percent'] >= 3:
            # ููุงุด ุงุทูุงุนุงุช fragment ุฏุฑ ุตูุฑุช ูุฌูุฏ
            fragment_info = ""
            if 'fragment_index' in d and 'fragment_count' in d:
                fragment_info = f" (ูุทุนู {d['fragment_index']}/{d['fragment_count']})"
            
            status_text = format_status_text(current_percent, d, fragment_info)
            # ...
```

## ูุชุงุฌ ุจูุจูุฏูุง

### 1. ุจูุจูุฏ ุชุฌุฑุจู ฺฉุงุฑุจุฑ
- โ **ุญุฐู ุชุฃุฎุฑ**: ฺฉุงุฑุจุฑุงู ููุฑุงู ูพุงู ุชุฃุฏ ุฏุฑุงูุช ูโฺฉููุฏ
- โ **ุดูุงูุช ูุฑุขูุฏ**: ููุงุด ูุฑุงุญู ูุฎุชูู ุฏุงูููุฏ
- โ **ฺฉุงูุด ุชุฑฺฉ ูุฑุขูุฏ**: ฺฉุงุฑุจุฑุงู ุฏฺฏุฑ ูฺฉุฑ ููโฺฉููุฏ ุฑุจุงุช ููฺฏ ฺฉุฑุฏู

### 2. ุฏูุช ููุงุด ูพุดุฑูุช
- โ **ุฏุฑุตุฏ ูุงูุน**: ููุงุด ุฏุฑุตุฏ ุตุญุญ ุจุฑ ุงุณุงุณ fragments
- โ **ุงุทูุงุนุงุช ุชฺฉูู**: ููุงุด ุดูุงุฑู ูุทุนู ูุนู ู ฺฉู
- โ **ุจูโุฑูุฒุฑุณุงู ููุธู**: ูุฑ 3 ุฏุฑุตุฏ ุจู ุฌุง 5 ุฏุฑุตุฏ

### 3. ูพุงุฏุงุฑ ุณุณุชู
- โ **ูุฏุฑุช ุฎุทุง**: ุญูุธ ูุฏุฑุช ุฎุทุงูุง ููุฌูุฏ
- โ **ุณุงุฒฺฏุงุฑ**: ุชุบุฑุงุช ุจุฏูู ุชุฃุซุฑ ุจุฑ ุนููฺฉุฑุฏ ฺฉู
- โ **ุชุณุช ูููู**: ฺฉุงููพุงู ุจุฏูู ุฎุทุง

## ูุงูโูุง ุชุบุฑ ุงูุชู

### `plugins/youtube_callback_query.py`
- **ุฎุทูุท ุงุถุงูู ุดุฏู**: 289-297, 473-481
- **ุฎุทูุท ุชุบุฑ ุงูุชู**: 6 (import), 321-365 (progress_hook)
- **ุชุนุฏุงุฏ ฺฉู ุชุบุฑุงุช**: ~50 ุฎุท

## ุชูุตูโูุง ุขูุฏู

1. **ูุงูุชูุฑูฺฏ ุนููฺฉุฑุฏ**: ูพฺฏุฑ ุฒูุงู ูพุงุณุฎโุฏู ุฏุฑ ูุญุท ุชููุฏ
2. **ุจูุจูุฏ ุจุดุชุฑ UI**: ุงุถุงูู ฺฉุฑุฏู ุงููุดู ุง ููุงุฑ ูพุดุฑูุช ฺฏุฑุงูฺฉ
3. **ูุงฺฏโฺฏุฑ**: ุซุจุช ุฒูุงูโูุง ูุฎุชูู ูุฑุขูุฏ ุจุฑุง ุชุญูู ุจูุชุฑ
4. **ุชุณุช ฺฉุงุฑุจุฑ**: ุฏุฑุงูุช ุจุงุฒุฎูุฑุฏ ฺฉุงุฑุจุฑุงู ูุงูุน

## ูุชุฌูโฺฏุฑ

ุชูุงู ูุดฺฉูุงุช ุงููู ุจุง ููููุช ุจุฑุทุฑู ุดุฏูุฏ:
- โ ุชุฃุฎุฑ 10-20 ุซุงููโุง ุญุฐู ุดุฏ
- โ ููุงุด ุฏุฑุตุฏ ูพุดุฑูุช ุงุตูุงุญ ุดุฏ
- โ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุจูุฏ ุงูุช
- โ ูพุงุฏุงุฑ ุณุณุชู ุญูุธ ุดุฏ

ุฑุจุงุช ูุชูุจ ุงฺฉููู ุขูุงุฏู ุงุณุชูุงุฏู ุฏุฑ ูุญุท ุชููุฏ ุงุณุช.

---
**ุชุงุฑุฎ ฺฏุฒุงุฑุด**: {{ current_date }}
**ูุณุฎู**: 1.1.0
**ูุถุนุช**: ุชฺฉูู ุดุฏู โ