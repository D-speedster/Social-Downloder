# ฺฏุฒุงุฑุด ุฑูุน ุจุงฺฏโูุง ูุชูุจ

## ุชุงุฑุฎ: 2024
## ูุณุฎู: 1.1

---

## ุฎูุงุตู ูุดฺฉูุงุช ุฑูุน ุดุฏู

ุจุฑ ุงุณุงุณ ุฎุฑูุฌ ุชุฑููุงูุ ฺูุฏู ูุดฺฉู ููู ุฏุฑ ุณุณุชู ูพุฑุฏุงุฒุด ููฺฉโูุง ูุชูุจ ุดูุงุณุง ู ุฑูุน ุดุฏ:

1. **ุฎุทุง Parse Mode ูุงูุนุชุจุฑ**
2. **ุฎุทุง MESSAGE_ID_INVALID**
3. **ูุดฺฉู ุงุญุฑุงุฒ ููุช ูุชูุจ**
4. **ุฎุทุง NoneType ุฏุฑ fallback**

---

## ุฌุฒุฆุงุช ูุดฺฉูุงุช ู ุฑุงูโุญูโูุง

### 1. ุฎุทุง Parse Mode ูุงูุนุชุจุฑ โโก๏ธโ

**ูุดฺฉู:**
```
Error sending photo: Invalid parse mode "Markdown"
```

**ุนูุช:**
- ุงุณุชูุงุฏู ุงุฒ ุฑุดุชู `"Markdown"` ุจู ุฌุง enum ููุงุณุจ
- ุนุฏู import ฺฉุฑุฏู `ParseMode` ุงุฒ pyrogram

**ุฑุงูโุญู:**
- ุงุถุงูู ฺฉุฑุฏู `from pyrogram.enums import ParseMode`
- ุชุบุฑ `parse_mode="Markdown"` ุจู `parse_mode=ParseMode.MARKDOWN`

**ูุงู ุชุบุฑ ุงูุชู:** `plugins/youtube.py`

### 2. ุฎุทุง MESSAGE_ID_INVALID โโก๏ธโ

**ูุดฺฉู:**
```
Telegram says: [400 MESSAGE_ID_INVALID] - The message id is invalid
```

**ุนูุช:**
- ุชูุงุด ุจุฑุง ูุฑุงุด ูพุงู ุจุนุฏ ุงุฒ ุญุฐู ุขู
- ุนุฏู ูุฏุฑุช ุตุญุญ ุชุฑุชุจ ุนููุงุช ุงุฑุณุงู ู ุญุฐู ูพุงู

**ุฑุงูโุญู:**
- ุชุบุฑ ุชุฑุชุจ ุนููุงุช: ุงุจุชุฏุง ุงุฑุณุงู ุนฺฉุณุ ุณูพุณ ุญุฐู ูพุงู ุงุตู
- ุงุถุงูู ฺฉุฑุฏู try-catch ุจุฑุง ูุฏุฑุช ุฎุทุงูุง ูุฑุงุด ูพุงู
- ุงุฌุงุฏ fallback ุจู ุงุฑุณุงู ูพุงู ุฌุฏุฏ ุฏุฑ ุตูุฑุช ุดฺฉุณุช ูุฑุงุด

**ฺฉุฏ ูุจู:**
```python
await message.edit_text("ุฏุฑ ุญุงู ุฏุงูููุฏ ฺฉุงูุฑ...")
await message.delete()
await client.send_photo(...)
```

**ฺฉุฏ ุจุนุฏ:**
```python
await message.edit_text("ุฏุฑ ุญุงู ุฏุงูููุฏ ฺฉุงูุฑ...")
photo_message = await client.send_photo(...)
try:
    await message.delete()
except:
    pass  # Ignore if message is already deleted
```

### 3. ูุดฺฉู ุงุญุฑุงุฒ ููุช ูุชูุจ โโก๏ธโ

**ูุดฺฉู:**
```
ERROR: Sign in to confirm you're not a bot. Use --cookies-from-browser or --cookies for the authentication
```

**ุนูุช:**
- ฺฉูฺฉโูุง ูุชูุจ ูููุถ ุง ูุงูุนุชุจุฑ
- ุนุฏู ุงุฑุงุฆู ูพุงู ุฎุทุง ูุงุถุญ ุจู ฺฉุงุฑุจุฑ

**ุฑุงูโุญู:**
- ุจูุจูุฏ ุชุดุฎุต ุฎุทุงูุง ูุฑุจูุท ุจู ุงุญุฑุงุฒ ููุช
- ุงุฌุงุฏ ูพุงู ุฎุทุง ุฌุงูุน ู ุฑุงูููุง ุจูโุฑูุฒุฑุณุงู ฺฉูฺฉ
- ุงุถุงูู ฺฉุฑุฏู fallback extraction ุจุฏูู ฺฉูฺฉ

**ูพุงู ุฎุทุง ุฌุฏุฏ:**
```
โ๏ธ ูุดฺฉู ุงุญุฑุงุฒ ููุช ูุชูุจ

ฺฉูฺฉโูุง ูุชูุจ ูุงูุนุชุจุฑ ุง ูููุถ ุดุฏู ุงุณุช.
ูุทูุงู ูุงู cookies/youtube.txt ุฑุง ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.

๐ ุฑุงูููุง ุจูโุฑูุฒุฑุณุงู ฺฉูฺฉ:
1. ูุงุฑุฏ ุญุณุงุจ ูุชูุจ ุฎูุฏ ุดูุฏ
2. ฺฉูฺฉโูุง ุฌุฏุฏ ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ
3. ูุงู cookies/youtube.txt ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ
```

### 4. ุฎุทุง NoneType ุฏุฑ Fallback โโก๏ธโ

**ูุดฺฉู:**
```
Fallback extraction also failed: 'NoneType' object has no attribute 'get'
```

**ุนูุช:**
- ุนุฏู import ฺฉุฑุฏู ูุงฺููโูุง ูุงุฒู (`time`, `shutil`, `YoutubeDL`)
- ุนุฏู ูุฏุฑุช ุตุญุญ ุฎุทุงูุง fallback

**ุฑุงูโุญู:**
- ุงุถุงูู ฺฉุฑุฏู import ูุง ฺฏูุดุฏู:
  - `import time`
  - `import shutil`
  - `from yt_dlp import YoutubeDL`
- ุจูุจูุฏ ูพุงู ุฎุทุง fallback ุจุง ุฑุงูููุง ฺฉุงุฑุจุฑูพุณูุฏ

---

## ุชุบุฑุงุช ุงุนูุงู ุดุฏู

### ูุงู `plugins/youtube.py`

**Import ูุง ุงุถุงูู ุดุฏู:**
```python
from pyrogram.enums import ParseMode
from yt_dlp import YoutubeDL
import time
import shutil
```

**ุจูุจูุฏูุง ุนููฺฉุฑุฏ:**
1. ุฑูุน ูุดฺฉู parse mode
2. ุจูุจูุฏ ูุฏุฑุช ูพุงูโูุง
3. ูพุงูโูุง ุฎุทุง ุจูุชุฑ
4. ูุฏุฑุช ุตุญุญ fallback

---

## ูุชุงุฌ ุชุณุช

### ูุจู ุงุฒ ุฑูุน ุจุงฺฏโูุง:
- โ ุฎุทุง parse mode ุฏุฑ ุงุฑุณุงู ุนฺฉุณ
- โ ุฎุทุง MESSAGE_ID_INVALID
- โ ูพุงู ุฎุทุง ูุงููููู ุจุฑุง ูุดฺฉูุงุช ุงุญุฑุงุฒ ููุช
- โ crash ุฏุฑ ุญุงูุช fallback

### ุจุนุฏ ุงุฒ ุฑูุน ุจุงฺฏโูุง:
- โ ุงุฑุณุงู ุตุญุญ ุนฺฉุณ ุจุง caption
- โ ูุฏุฑุช ุตุญุญ ูพุงูโูุง ุจุฏูู ุฎุทุง
- โ ูพุงูโูุง ุฎุทุง ูุงุถุญ ู ุฑุงูููุง
- โ fallback ูพุงุฏุงุฑ ุจุง ูุฏุฑุช ุฎุทุง

---

## ุจูุจูุฏูุง ุงุถุงู

### 1. ูุฏุฑุช ุฎุทุงูุง ุดุจฺฉู
- ุงุถุงูู ฺฉุฑุฏู timeout ูุง ููุงุณุจ
- ูุฏุฑุช connection errors
- Retry mechanism ุจูุจูุฏ ุงูุชู

### 2. ุชุฌุฑุจู ฺฉุงุฑุจุฑ
- ูพุงูโูุง ุฎุทุง ูุงุฑุณ ู ูุงุถุญ
- ุฑุงูููุง ฺฏุงู ุจู ฺฏุงู ุจุฑุง ุฑูุน ูุดฺฉูุงุช
- ููุงุด ูุถุนุช ูพุฑุฏุงุฒุด ุจู ฺฉุงุฑุจุฑ

### 3. ูพุงุฏุงุฑ ุณุณุชู
- ูุฏุฑุช ุตุญุญ memory leaks
- ุจูุจูุฏ performance logging
- Graceful degradation ุฏุฑ ุดุฑุงุท ุฎุทุง

---

## ุชูุตูโูุง ูฺฏูุฏุงุฑ

### 1. ุจูโุฑูุฒุฑุณุงู ฺฉูฺฉโูุง
- ุจุฑุฑุณ ุฏูุฑูโุง ูุงู `cookies/youtube.txt`
- ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ุฎูุฏฺฉุงุฑ ุงุณุชุฎุฑุงุฌ ฺฉูฺฉ
- ูุงูุชูุฑูฺฏ ุฎุทุงูุง ุงุญุฑุงุฒ ููุช

### 2. ูุงูุชูุฑูฺฏ ุนููฺฉุฑุฏ
- ุจุฑุฑุณ ูุงฺฏโูุง performance
- ุฑุฏุงุจ ุฒูุงู ูพุฑุฏุงุฒุด
- ุดูุงุณุง ุงูฺฏููุง ุฎุทุง

### 3. ุชุณุช ูุฏุงูู
- ุชุณุช ุจุง ุงููุงุน ููฺฉโูุง ูุชูุจ
- ุจุฑุฑุณ ุนููฺฉุฑุฏ ุฏุฑ ุดุฑุงุท ูุฎุชูู ุดุจฺฉู
- ุชุณุช fallback scenarios

---

## ูุชุฌูโฺฏุฑ

ุชูุงู ูุดฺฉูุงุช ุดูุงุณุง ุดุฏู ุจุง ููููุช ุฑูุน ุดุฏ:

- **ูพุงุฏุงุฑ:** ุณุณุชู ุญุงูุง ุฏุฑ ุจุฑุงุจุฑ ุฎุทุงูุง ูุฎุชูู ููุงูู ุงุณุช
- **ฺฉุงุฑุจุฑูพุณูุฏ:** ูพุงูโูุง ุฎุทุง ูุงุถุญ ู ุฑุงูููุง ุงุฑุงุฆู ูโุดูุฏ
- **ุนููฺฉุฑุฏ:** ุจูุจูุฏ ูุงุจู ุชูุฌู ุฏุฑ ุณุฑุนุช ู ฺฉุงุฑุง
- **ูฺฏูุฏุงุฑ:** ฺฉุฏ ุชูุฒุชุฑ ู ูุงุจู ูฺฏูุฏุงุฑโุชุฑ

ุณุณุชู ุญุงูุง ุขูุงุฏู ุงุณุชูุงุฏู ุฏุฑ ูุญุท ุชููุฏ ุงุณุช ู ูโุชูุงูุฏ ุญุฌู ุจุงูุง ุงุฒ ุฏุฑุฎูุงุณุชโูุง ุฑุง ุจุฏูู ูุดฺฉู ูพุฑุฏุงุฒุด ฺฉูุฏ.

---

**ุชููโฺฉููุฏู ฺฏุฒุงุฑุด:** AI Assistant  
**ูุถุนุช:** ุชฺฉูู ุดุฏู โ  
**ุงูููุช:** ุจุญุฑุงู - ุฑูุน ุดุฏู