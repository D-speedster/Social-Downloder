# ๐ ุฏุณุชูุฑุงูุนูู ููุง ุฏุจุงฺฏ

## โ ูุถุนุช ูุนู

ุณุณุชู ุชุณุช ุดุฏ ู **ฺฉุงููุง ุณุงูู** ุงุณุช:
- โ Import ูููู
- โ State management ฺฉุงุฑ ูโฺฉูุฏ
- โ Filter ุจู ุฏุฑุณุช ุนูู ูโฺฉูุฏ

## ๐ ูุฑุงุญู ุญู ูุดฺฉู

### ูุฑุญูู 1: ุฑุณุชุงุฑุช ฺฉุงูู ุฑุจุงุช

```bash
# ุชููู ุฑุจุงุช
Ctrl+C

# ูพุงฺฉ ฺฉุฑุฏู cache
rm -rf __pycache__
rm -rf plugins/__pycache__

# ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
python main.py
```

### ูุฑุญูู 2: ุชุณุช ุจุง ูุงฺฏโฺฏุฑ

1. ุฑุจุงุช ุฑุง ุงุฌุฑุง ฺฉูุฏ
2. ุฏุฑ ฺฉ ุชุฑููุงู ุฏฺฏุฑ ูุงฺฏโูุง ุฑุง ุจุจูุฏ:

```bash
# ุฏุฑ ูููฺฉุณ/ูฺฉ:
tail -f logs/bot.log | grep SPONSOR

# ุฏุฑ ููุฏูุฒ PowerShell:
Get-Content logs\bot.log -Wait | Select-String "SPONSOR"
```

3. ุญุงูุง ุชุณุช ฺฉูุฏ:
   - ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ
   - **๐ข ุชูุธู ุงุณูพุงูุณุฑ**
   - **โ ุงูุฒูุฏู ููู ุฌุฏุฏ**
   - `@okalef` ุฑุง ุจูุฑุณุชุฏ

### ูุฑุญูู 3: ุจุฑุฑุณ ูุงฺฏโูุง

ุจุงุฏ ุงู ูุงฺฏโูุง ุฑุง ุจุจูุฏ:

```
[SPONSOR_ADD] Callback triggered by user 79049016
[SPONSOR_ADD] State set: action=add, step=1 for user 79049016
[SPONSOR_FILTER] user=79049016, action=add, step=1, active=True
[SPONSOR_ADD] Handler triggered for user=79049016
[SPONSOR_ADD] Message text: @okalef
[SPONSOR_ADD] Channel ref: @okalef
[SPONSOR_ADD] Format valid, proceeding...
[SPONSOR_ADD] Fetching chat info...
```

## ๐ ุงฺฏุฑ ูุดฺฉู ููฺูุงู ูุฌูุฏ ุฏุงุฑุฏ

### ุญุงูุช 1: ูฺ ูุงฺฏ ููโุจูุฏ

**ูุดฺฉู:** Handler ุงุตูุง trigger ููโุดูุฏ

**ุฑุงูโุญู:**
```bash
# ุจุฑุฑุณ import
python -c "import plugins.sponsor_admin; print('OK')"

# ุงฺฏุฑ ุฎุทุง ุฏุงุฏุ ูุงู ุฑุง ุฏูุจุงุฑู ุจุฎูุงูุฏ
```

### ุญุงูุช 2: Filter False ุจุฑูโฺฏุฑุฏุงูุฏ

**ูุดฺฉู:** State set ูุดุฏู

**ุฑุงูโุญู:**
```python
# ุงุฌุฑุง ุงุณฺฉุฑูพุช ุฏุจุงฺฏ
python debug_sponsor_state.py

# ุจุงุฏ ููู ฺุฒ OK ุจุงุดุฏ
```

### ุญุงูุช 3: Handler ุฏฺฏุฑ ูพุงู ุฑุง ูโฺฏุฑุฏ

**ูุดฺฉู:** Priority handler ูพุงู ุงุณุช

**ุฑุงูโุญู:**
- ุจุฑุฑุณ ฺฉูุฏ `group=3` ุงุณุช
- Handler ุฏฺฏุฑ ุจุง `group` ฺฉูุชุฑ ุงุฒ 3 ูุจุงุดุฏ

## ๐ ฺฺฉโูุณุช ูุจู ุงุฒ ุชุณุช

- [ ] ุฑุจุงุช ฺฉุงููุง ุฑุณุชุงุฑุช ุดุฏู
- [ ] Cache ูพุงฺฉ ุดุฏู
- [ ] `sponsor_admin.py` ุฏุฑ `bot.py` import ุดุฏู
- [ ] ูุงฺฏโูุง ุฏุฑ ุญุงู ููุงุด ูุณุชูุฏ
- [ ] ุฑุจุงุช ุฏุฑ ฺฉุงูุงู ุงุฏูู ุงุณุช

## ๐ฏ ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ

ุจุนุฏ ุงุฒ ุงุฑุณุงู `@okalef`:

```
โ ููู ุจุง ููููุช ุงุถุงูู ุดุฏ!

๐ ฺฉุงูุงู: OkAlef
๐ ุดูุงุณู: -1001234567890
๐ ูุฒุฑูู: @okalef
๐ Lock ID: lock_1_1761912345

โ ุงุฒ ุงู ูุญุธู ฺฉุงุฑุจุฑุงู ุจุงุฏ ุฏุฑ ุงู ฺฉุงูุงู ุนุถู ุดููุฏ.
```

## ๐ ุงฺฏุฑ ุจุงุฒ ูู ูุดฺฉู ุฏุงุฑุฏ

ูุทูุงู ุงู ุงุทูุงุนุงุช ุฑุง ุงุฑุณุงู ฺฉูุฏ:

1. **ุขุฎุฑู 50 ุฎุท ูุงฺฏ:**
   ```bash
   tail -n 50 logs/bot.log > last_log.txt
   ```

2. **ุฎุฑูุฌ ุงุณฺฉุฑูพุช ุฏุจุงฺฏ:**
   ```bash
   python debug_sponsor_state.py > debug_output.txt
   ```

3. **ุงุณฺฉุฑูโุดุงุช:**
   - ุงุฒ ูพุงู ฺฉู ุฏุฑุงูุช ูโฺฉูุฏ
   - ุงุฒ ูุงฺฏโูุง

4. **ูุฑุงุญู ุฏูู:**
   - ฺู ุฏฺฉููโูุง ุฒุฏุฏุ
   - ฺู ูุชู ูุฑุณุชุงุฏุฏุ
   - ฺู ูพุงู ุฏุฑุงูุช ฺฉุฑุฏุฏุ

---

**ูฺฉุชู ููู:** ุณุณุชู ุชุณุช ุดุฏู ู ฺฉุงุฑ ูโฺฉูุฏ. ุงฺฏุฑ ูุดฺฉู ุฏุงุฑุฏุ ุงุญุชูุงูุง ฺฉ ุงุฒ ุงู ููุงุฑุฏ ุงุณุช:
1. ุฑุจุงุช ุฑุณุชุงุฑุช ูุดุฏู
2. Cache ูพุงฺฉ ูุดุฏู
3. Handler ุฏฺฏุฑ ุจุง priority ุจุงูุงุชุฑ ูุฌูุฏ ุฏุงุฑุฏ
4. State ุจู ุฏุฑุณุช set ููโุดูุฏ

**ุฑุงูโุญู ูุทุน:** ุฑุณุชุงุฑุช ฺฉุงูู + ูพุงฺฉ ฺฉุฑุฏู cache + ุจุฑุฑุณ ูุงฺฏโูุง

---

**ุชุงุฑุฎ:** 1404/08/09 - 16:45  
**ูุถุนุช:** โ ุขูุงุฏู ุจุฑุง ุชุณุช
